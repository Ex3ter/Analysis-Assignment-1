---
title: "Assignment 1"
author: "Marcus DeSante"
date: "2025-10-15"
output:
  pdf_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
#Set working directory in order to pull the image
#For my home rig
setwd('C:\\Users\\mcd12\\Desktop\\University\\Masters Year 2\\Analysis project')
#For my laptop
#setwd('C:\\Users\\mcd12\\OneDrive\\Desktop\\Postgrad\\Analysis\\Analysis project')
```

# Introduction

The data I have chosen for this assignment is my first 25 matches of 2XKO.  2XKO is, in the words of its creators Riot Games, "a 2v2 tag-team fighting game".  It is structured as two teams of two characters dueling each other to knockout in a best-of-three match.  The victor of each round is whoever depletes their opponent's life total to zero first.

I chose this data set because, while I have some passing familiarity with games from the genre (~70 hours), I am unfamiliar with this specific subgenre (tag fighter).  The game came out just after this assignment, and therefore I decided it would be a good source of relatively unbiased data. I can also see how my choices affect my gameplay and if my win rate changes over time.  Additionally, it allowed me to use this assignment as a source of motivation to play the game, as it was now part of my grade.

These types of games are known for their complexity, so I will omit many of the details of how this game functions.  However, I will quickly cover the elements that appear in my data.


An explanation of each column of the data:

  Date:  The date that the given row entry was recorded.
  
  Hour:  The hour the given row entry was recorded.  I chose to use hour instead of exact time due to the difficulty of getting precise time measurements mid-game.
  
  Game_number:  The number of the data entry.  Likely unnecessary, but it saved me when .tsv decided to mess with my formatting.
  
  Match_type:  2XKO has multiple gameplay modes, namely Casual, Ranked, Private, Versus, and Training.  I included this in the chance that I decided to swap to Ranked, but as I only played Casual matches during this data collection period, this data is unnecessary.  "Casual" refers to a mode where you are semi-randomly matched against other players with no consideration of skill level.
  
  My_point:  My first character of the match.  As this is a tag-team game, when picking your characters, you pick two characters, a first character referred to as your "point" and a second character referred to as your "anchor".  I always pick the character Yasuo as my point.
  
  My_anchor:  My second character of the match.  Neither this data nor the My_point data change, so this is unnecessary.  I always pick the character Jinx as my anchor.
  
  My_fuse:  "Fuses" are modifiers you equip your team with that give you access to different system mechanics.  There are five in total.  You will see me switch from "Sidekick" (a fuse that locks your anchor out of playing the game in exchange for increasing the power of your point character) to "Double Down" (a fuse that increases your damage potential as a team).
  
  Opponent_point:  Opponent's point character.
  
  Opponent_anchor:  Opponent's anchor character.
  
  Opponent_fuse:  Opponent's fuse.
  
  W.L:  The win/lose record of the match.  This is formatted as my wins-my losses.  As it is a best-of-three format, the winner will have two points. The exception is the first data point, where my opponent disconnected halfway through the second round.
  
  Win:  Whether I won or not.  A 1 means I won, a 0 means I lost.  I was originally going to be clever and find a way to automatically convert the W.L into this using R, but I realized it would be a lot less work to just do it manually.
  
  Match_duration:  The duration of each round in the match in seconds.


This data was collected both during the match and afterward.  This was facilitated by 2XKO's built-in match replay system, which lets you rewatch matches you have played previously at your leisure.  This feature was very helpful in gathering this data, particularly the match duration data.

![My data collection station](Images\\Selfie.jpg){width=40%}

# The code

Moving into the actual analysis, I need to start by cleaning up the data set.  There are several variables that are superfluous given the analysis methods being used, and should therefore be removed.

## Dataset Cleanup

Start by loading in the data.  This will unfortunately be computer-specific.  Modify as needed.

Load the data in with

```{r load}
#For my home rig
#`2XKO.Data` <- read.csv("C:\\Users\\mcd12\\Desktop\\University\\Masters Year 2\\Analysis project\\2XKO Data.csv", sep='')
`2XKO.Data` <- read.table("C:\\Users\\mcd12\\Desktop\\University\\Masters Year 2\\Analysis project\\2XKO Data.txt", sep=' ', head=TRUE)
#For my laptop
#`2XKO.Data` <- read.csv("C:\\Users\\mcd12\\OneDrive\\Desktop\\Postgrad\\Analysis\\Analysis project\\2XKO Data.csv", sep='')
#`2XKO.Data` <- read.table("C:\\Users\\mcd12\\OneDrive\\Desktop\\Postgrad\\Analysis\\Analysis project\\2XKO Data.txt", sep='')
#or find it yourself
#file.choose()
```
Due to the data being restricted to .txt files, I ran into some problems with data not being saved the way I intended.  I had to do a lot of reworking, hence the underscores in the column names.

Check everything loaded in correctly.
```{r data header}
head(`2XKO.Data`)
```
Excellent.

Make the data easier to reference by changing its name to something easier to type.
```{r name fix}
dat <- `2XKO.Data`
```
  
Now to get rid of the superfluous columns.  Columns 4, 5, and 6 never change and are therefore unnecessary.

```{r remove columns}
dat <- subset(dat, select = -c(4, 5, 6))
```

There was originally a column 14 of various extra notes that didn't fit into the other categories.  I removed that last column manually, as it was causing too many problems when converted to .tsv.

Now with the data cleaned up, I can start analyzing.

## T-test

So, let's start with a simple t-test.  I'm curious as to whether my average round duration differs between the games I win and the games I lose.  So H0:mu1=mu2, H1:mu1=/mu2.

I was going to try and be fancy and use R to convert column 8 to a clean win/loss record and column 10 to an average round duration, but if that is possible I don't know how, so I'll make the relevant lists manually.

```{r t test}
#Create two lists of average round durations, one of matches I won, one of matches I lost.
duration_l <- c(53.7, 54, 76, 77.3, 65, 74.5, 60.5, 69.5, 64.3, 52)
duration_w <- c(26, 52.3, 56.7, 65.5, 76, 78, 79, 64, 61.3, 64, 65, 60.5, 54, 61, 62.5)
t.test(duration_l, duration_w)
```

A p-value of 0.51 is conclusive.  I fail to reject the null.  There is no evidence to suggest that my average round duration differs between the games I win and the games I lose.


## Fisher Exact Test

I would now like to test if my fuse choice affected my win rate.  You can see in the data that I swapped from Sidekick to Double Down in game seven.

Start by making the 2x2 table.
```{r fuse}
#Make a 2x2 matrix of the given quantities with the correct row/column names
fuse <- matrix(c(3, 7, 3, 12), 2, 2, dimnames=list(c("Sidekick", "Double Down"), c("Loss", "Win")))
print(fuse)
```

Then run the test.
```{r fisher}
#A quick test function to make sure the Fisher test isn't wildly off base.
sum(dhyper(x=0:3, m=15, n=10, k=6))
#0.455.  Expect a larger p-value from the Fisher test.
fisher.test(fuse)
```
A p-value of 0.65 is conclusive.  I fail to reject the null.  There is no evidence to suggest that my change in fuse affected my win rate.


## Linear Regression

I'm not entirely sure if this is a viable usage of Linear Regression, as I am not sure the data is linear.  However, I'm going to try and see if game number or match duration correlate with my win rate.

First, I'm going to have to rework the Match_duration data.  The different number of matches per game complicates things somewhat, so I'm going to add an "average match duration" column to simplify things.
```{r match_duration rework}
#Make the list
duration <- c(26, 52.3, 56.7, 53.7, 54, 76, 77.3, 65.5, 76, 78, 79, 64,
              65, 74.5, 60.5, 61.3, 69.5, 64, 65, 64.3, 60.5, 54, 61, 62.5, 52)
#Merge it with the original dataset
dat$Average_match_duration <- duration
#Check it worked
head(dat)
```
Beautiful.  Plot it to have an idea of what I'm working with.

```{r linplot, fig.height = 4, fig.width = 4}
plot(dat$Game_number, dat$Average_match_duration)
```

I could argue a vague downward trend, but it's pretty random.  Point #1 is an outlier because my opponent left halfway through the second round.

Now to analyse.
```{r linear_regression}
#Run the linear regression
summary(lm(Win. ~ Game_number * Average_match_duration, data=dat))
```

Not unexpected. I wasn't seeing much of a relation in the plot either, so I didn't expect one to materialize here.  I see no evidence to suggest a correlation between my match duration, the number of games I have played, and my win rate.

I'll try cutting the interaction term and see if that changes anything.

```{r remove interation}
summary(lm(Win. ~ Game_number + Average_match_duration, data=dat))
```

Worse in every respect.

I guess I could try logging the variables to see if that changes anything, but I doubt it.  Note that I can't log Win., as that would cause errors (can't log(0)).

```{r loglinplot}
summary(lm(Win. ~ log(Game_number) * log(Average_match_duration), data=dat))
```

As expected.  If anything it got a touch worse.

## Log-likelihood/support

Finally, I'll do a credible interval for my win rate.

```{r CI, fig.height = 4, fig.width = 4}
#Create a sequence of values for the axis
p<-seq(from=0, to=1, len=100)
#Set up the difference between our observed data and the average
support<-function(p){dbinom(14,25, p, log=T)-dbinom(14, 25, 14/25, log=T)}
plot(p, support(p))
#Set the lower bound and mean
abline(h=-2)
abline(v=14/25)

#Increase the support to normalize
f<-function(p){support(p)+2}
uniroot(f, c(0.2, 0.5))
#0.363
uniroot(f, c(0.6, 0.9))
#0.745
```
So the credible interval, that being the range within which there is a 95% of my true mean winrate being contained, is (0.363, 0.745).  That is a wide range.  Since I was looking for a significant difference from 0.5, it is far too wide to draw any conclusions from.


# Conclusion

So overall, looking back over the data and analysis, I can conclude that I failed to conclude much of anything.  I was unable to derive any significant observations or conclusions from the data I had gathered.  This is not altogether unsurprising, as the dataset is quite small.  A dataset several times larger would likely be needed in order to derive statistically significant conclusions from.